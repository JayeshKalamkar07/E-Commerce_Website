{"ast":null,"code":"var _jsxFileName = \"D:\\\\vs code\\\\OUTSTANDING-3\\\\frontend\\\\src\\\\screens\\\\PlaceOrderScreen.js\";\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { createOrder } from '../actions/orderActions';\nimport CheckoutSteps from '../components/CheckoutSteps';\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nexport default function PlaceOrderScreen(props) {\n  const cart = useSelector(state => state.cart);\n\n  if (!cart.paymentMethod) {\n    props.history.push('/payment');\n  }\n\n  const orderCreate = useSelector(state => state.orderCreate);\n  const {\n    loading,\n    success,\n    error,\n    order\n  } = orderCreate;\n\n  const toPrice = num => Number(num.toFixed(2)); // 5.123 => \"5.12\" => 5.12\n\n\n  cart.itemsPrice = toPrice(cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0));\n  cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n  cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n  const dispatch = useDispatch();\n\n  const placeOrderHandler = () => {\n    dispatch(createOrder({ ...cart,\n      orderItems: cart.cartItems\n    }));\n  };\n\n  useEffect(() => {\n    if (success) {\n      props.history.push(`/order/${order._id}`);\n      dispatch({\n        type: ORDER_CREATE_RESET\n      });\n    }\n  }, [dispatch, order, props.history, success]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(CheckoutSteps, {\n    step1: true,\n    step2: true,\n    step3: true,\n    step4: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }, \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 71\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }, \" Shipping \"), \" \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 34\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, \" Name: \"), \" \", cart.shippingAddress.fullName, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 71\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, \" Address: \"), \" \", cart.shippingAddress.address, \", \", cart.shippingAddress.city, \", \", cart.shippingAddress.postalCode, \", \", cart.shippingAddress.country, \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, \" Payment \"), \" \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \" Method: \"), \" \", cart.paymentMethod, \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, \" Order Items \"), \" \", /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 37\n    }\n  }, \" \", cart.cartItems.map(item => /*#__PURE__*/React.createElement(\"li\", {\n    key: item.product,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 48\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: item.image,\n    alt: item.name,\n    className: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"min-30\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/product/${item.product}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, \" \", item.name, \" \"), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, \" \", item.qty, \"x $ \", item.price, \" = $ \", item.qty * item.price, \" \"), \" \"), \" \")), \" \"), \" \"), \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, \" Order Summary \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, \" Items \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 33\n    }\n  }, \" $ \", cart.itemsPrice.toFixed(2), \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, \" Shipping \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 36\n    }\n  }, \" $ \", cart.shippingPrice.toFixed(2), \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, \" Tax \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 31\n    }\n  }, \" $ \", cart.taxPrice.toFixed(2), \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, \" Order Total \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, \" $ \", cart.totalPrice.toFixed(2), \" \"), \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: placeOrderHandler,\n    className: \"primary block\",\n    disabled: cart.cartItems.length === 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, \"Place Order \"), \" \"), \" \", loading && /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 28\n    }\n  }, \" \"), \" \", error && /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 30\n    }\n  }, \" \", error, \" \"), \" \"), \" \"), \" \"), \" \"), \" \");\n}","map":{"version":3,"sources":["D:/vs code/OUTSTANDING-3/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","createOrder","CheckoutSteps","ORDER_CREATE_RESET","LoadingBox","MessageBox","PlaceOrderScreen","props","cart","state","paymentMethod","history","push","orderCreate","loading","success","error","order","toPrice","num","Number","toFixed","itemsPrice","cartItems","reduce","a","c","qty","price","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","type","shippingAddress","fullName","address","city","postalCode","country","map","item","product","image","name","length"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { createOrder } from '../actions/orderActions';\r\nimport CheckoutSteps from '../components/CheckoutSteps';\r\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\n\r\nexport default function PlaceOrderScreen(props) {\r\n    const cart = useSelector((state) => state.cart);\r\n    if (!cart.paymentMethod) {\r\n        props.history.push('/payment');\r\n    }\r\n    const orderCreate = useSelector((state) => state.orderCreate);\r\n    const { loading, success, error, order } = orderCreate;\r\n    const toPrice = (num) => Number(num.toFixed(2)); // 5.123 => \"5.12\" => 5.12\r\n    cart.itemsPrice = toPrice(\r\n        cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0)\r\n    );\r\n    cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\r\n    cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\r\n    cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\r\n    const dispatch = useDispatch();\r\n    const placeOrderHandler = () => {\r\n        dispatch(createOrder({...cart, orderItems: cart.cartItems }));\r\n    };\r\n    useEffect(() => {\r\n        if (success) {\r\n            props.history.push(`/order/${order._id}`);\r\n            dispatch({ type: ORDER_CREATE_RESET });\r\n        }\r\n    }, [dispatch, order, props.history, success]);\r\n    return ( <\r\n            div >\r\n            <\r\n            CheckoutSteps step1 step2 step3 step4 > < /CheckoutSteps> <\r\n            div className = \"row top\" >\r\n            <\r\n            div className = \"col-2\" >\r\n            <\r\n            ul >\r\n            <\r\n            li >\r\n            <\r\n            div className = \"card card-body\" >\r\n            <\r\n            h2 > Shipping < /h2> <\r\n            p >\r\n            <\r\n            strong > Name: < /strong> {cart.shippingAddress.fullName} <br / >\r\n            <\r\n            strong > Address: < /strong> {cart.shippingAddress.address}, { cart.shippingAddress.city }, { cart.shippingAddress.postalCode }, { cart.shippingAddress.country } <\r\n            /p> <\r\n            /div> <\r\n            /li> <\r\n            li >\r\n            <\r\n            div className = \"card card-body\" >\r\n            <\r\n            h2 > Payment < /h2> <\r\n            p >\r\n            <\r\n            strong > Method: < /strong> {cart.paymentMethod} <\r\n            /p> <\r\n            /div> <\r\n            /li> <\r\n            li >\r\n            <\r\n            div className = \"card card-body\" >\r\n            <\r\n            h2 > Order Items < /h2> <\r\n            ul > {\r\n                cart.cartItems.map((item) => ( <\r\n                    li key = { item.product } >\r\n                    <\r\n                    div className = \"row\" >\r\n                    <\r\n                    div >\r\n                    <\r\n                    img src = { item.image }\r\n                    alt = { item.name }\r\n                    className = \"small\" >\r\n                    < /img> <\r\n                    /div> <\r\n                    div className = \"min-30\" >\r\n                    <\r\n                    Link to = { `/product/${item.product}` } > { item.name } <\r\n                    /Link> <\r\n                    /div>\r\n\r\n                    <\r\n                    div > { item.qty }\r\n                    x $ { item.price } = $ { item.qty * item.price } <\r\n                    /div> <\r\n                    /div> <\r\n                    /li>\r\n                ))\r\n            } <\r\n            /ul> <\r\n            /div> <\r\n            /li> <\r\n            /ul> <\r\n            /div> <\r\n            div className = \"col-1\" >\r\n            <\r\n            div className = \"card card-body\" >\r\n            <\r\n            ul >\r\n            <\r\n            li >\r\n            <\r\n            h2 > Order Summary < /h2> <\r\n            /li> <\r\n            li >\r\n            <\r\n            div className = \"row\" >\r\n            <\r\n            div > Items < /div> <\r\n            div > $ { cart.itemsPrice.toFixed(2) } < /div> <\r\n            /div> <\r\n            /li> <\r\n            li >\r\n            <\r\n            div className = \"row\" >\r\n            <\r\n            div > Shipping < /div> <\r\n            div > $ { cart.shippingPrice.toFixed(2) } < /div> <\r\n            /div> <\r\n            /li> <\r\n            li >\r\n            <\r\n            div className = \"row\" >\r\n            <\r\n            div > Tax < /div> <\r\n            div > $ { cart.taxPrice.toFixed(2) } < /div> <\r\n            /div> <\r\n            /li> <\r\n            li >\r\n            <\r\n            div className = \"row\" >\r\n            <\r\n            div >\r\n            <\r\n            strong > Order Total < /strong> <\r\n            /div> <\r\n            div >\r\n            <\r\n            strong > $ { cart.totalPrice.toFixed(2) } < /strong> <\r\n            /div> <\r\n            /div> <\r\n            /li> <\r\n            li >\r\n            <\r\n            button type = \"button\"\r\n            onClick = { placeOrderHandler }\r\n            className = \"primary block\"\r\n            disabled = { cart.cartItems.length === 0 } >\r\n            Place Order <\r\n            /button> <\r\n            /li> {\r\n                loading && < LoadingBox > < /LoadingBox>} {\r\n                    error && < MessageBox variant = \"danger\" > { error } < /MessageBox>} <\r\n                        /ul> <\r\n                        /div> <\r\n                        /div> <\r\n                        /div> <\r\n                        /div>\r\n                );\r\n            }"]},"metadata":{},"sourceType":"module"}