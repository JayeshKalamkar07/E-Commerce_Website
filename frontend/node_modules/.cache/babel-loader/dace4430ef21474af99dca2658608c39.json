{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\shopping app\\\\frontend\\\\src\\\\screens\\\\ProductScreen.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { createReview, detailsProduct } from '../actions/productActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport Rating from '../components/Rating';\nimport { PRODUCT_REVIEW_CREATE_RESET } from '../constants/productConstants';\nexport default function ProductScreen(props) {\n  const dispatch = useDispatch();\n  const productId = props.match.params.id;\n  const [qty, setQty] = useState(1);\n  const productDetails = useSelector(state => state.productDetails);\n  const {\n    loading,\n    error,\n    product\n  } = productDetails;\n  const userSignin = useSelector(state => state.userSignin);\n  const {\n    userInfo\n  } = userSignin;\n  const productReviewCreate = useSelector(state => state.productReviewCreate);\n  const {\n    loading: loadingReviewCreate,\n    error: errorReviewCreate,\n    success: successReviewCreate\n  } = productReviewCreate;\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  useEffect(() => {\n    if (successReviewCreate) {\n      window.alert('Review Submitted Successfully');\n      setRating('');\n      setComment('');\n      dispatch({\n        type: PRODUCT_REVIEW_CREATE_RESET\n      });\n    }\n\n    dispatch(detailsProduct(productId));\n  }, [dispatch, productId, successReviewCreate]);\n\n  const addToCartHandler = () => {\n    props.history.push(`/cart/${productId}?qty=${qty}`);\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n\n    if (comment && rating) {\n      dispatch(createReview(productId, {\n        rating,\n        comment,\n        name: userInfo.name\n      }));\n    } else {\n      alert('Please enter comment and rating');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 14\n    }\n  }, \" \", loading ? /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 25\n    }\n  }, \" \") : error ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 27\n    }\n  }, \" \", error, \" \") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  }, \" Back to Home \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 59\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"large\",\n    src: product.image,\n    alt: product.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, \" \", product.name, \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(Rating, {\n    rating: product.rating,\n    numReviews: product.numReviews,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 26\n    }\n  }, \" Pirce: \\u20B9\", product.price, \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 59\n    }\n  }, \"Description:\", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, \" \", product.description, \" \"), \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, \"Seller \", ' ', \" \", /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 36\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/seller/${product.product._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, \" \", product.product.name, \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(Rating, {\n    rating: product.seller.seller.rating,\n    numReviews: product.seller.seller.numReviews,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 26\n    }\n  }), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, \" Price \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 41\n    }\n  }, \" \\u20B9\", product.price, \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, \" Status \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 42\n    }\n  }, \" \", product.countInStock > 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 54\n    }\n  }, \" In Stock \") : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 31\n    }\n  }, \" Unavailable \"), \" \"), \" \"), \" \"), \" \", product.countInStock > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }\n  }, \" Qty \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 47\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    value: qty,\n    onChange: e => setQty(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 29\n    }\n  }, [...Array(product.countInStock).keys()].map(x => /*#__PURE__*/React.createElement(\"option\", {\n    key: x + 1,\n    value: x + 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 46\n    }\n  }, \" \", x + 1, \" \")), \" \"), \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 34\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: addToCartHandler,\n    className: \"primary block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 29\n    }\n  }, \"Add to Cart \"), \" \"), \" \"), \" \"), \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    id: \"reviews\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 21\n    }\n  }, \" Reviews \"), \" \", product.reviews.length === 0 && /*#__PURE__*/React.createElement(MessageBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 59\n    }\n  }, \" There is no review \"), \" \", /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 23\n    }\n  }, \" \", product.reviews.map(review => /*#__PURE__*/React.createElement(\"li\", {\n    key: review._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 59\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 29\n    }\n  }, \" \", review.name, \" \"), \" \", /*#__PURE__*/React.createElement(Rating, {\n    rating: review.rating,\n    caption: \" \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 65\n    }\n  }, \" \"), \" \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 56\n    }\n  }, \" \", review.createdAt.substring(0, 10), \" \"), \" \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 77\n    }\n  }, \" \", review.comment, \" \"), \" \")), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 23\n    }\n  }, \" \", userInfo ? /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form\",\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 38\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 29\n    }\n  }, \" Write a customer review \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 35\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"rating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 29\n    }\n  }, \" Rating \"), \" \", /*#__PURE__*/React.createElement(\"select\", {\n    id: \"rating\",\n    value: rating,\n    onChange: e => setRating(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 73\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 29\n    }\n  }, \" Select... \"), \" \", /*#__PURE__*/React.createElement(\"option\", {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 70\n    }\n  }, \" 1 - Poor \"), \" \", /*#__PURE__*/React.createElement(\"option\", {\n    value: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 70\n    }\n  }, \" 2 - Fair \"), \" \", /*#__PURE__*/React.createElement(\"option\", {\n    value: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 70\n    }\n  }, \" 3 - Good \"), \" \", /*#__PURE__*/React.createElement(\"option\", {\n    value: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 70\n    }\n  }, \" 4 - Very good \"), \" \", /*#__PURE__*/React.createElement(\"option\", {\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 75\n    }\n  }, \" 5 - Excelent \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 35\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 29\n    }\n  }, \" Comment \"), \" \", /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"comment\",\n    value: comment,\n    onChange: e => setComment(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 75\n    }\n  }), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 35\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"primary\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 29\n    }\n  }, \"Submit \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 35\n    }\n  }, \" \", loadingReviewCreate && /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 56\n    }\n  }, \" \"), \" \", errorReviewCreate && /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 60\n    }\n  }, \" \", errorReviewCreate, \" \"), \" \"), \" \") : /*#__PURE__*/React.createElement(MessageBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 34\n    }\n  }, \"Please \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 40\n    }\n  }, \" Sign In \"), \" to write a review \"), \" \"), \" \"), \" \"), \" \"), \" \");\n}","map":{"version":3,"sources":["D:/projects/shopping app/frontend/src/screens/ProductScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Link","createReview","detailsProduct","LoadingBox","MessageBox","Rating","PRODUCT_REVIEW_CREATE_RESET","ProductScreen","props","dispatch","productId","match","params","id","qty","setQty","productDetails","state","loading","error","product","userSignin","userInfo","productReviewCreate","loadingReviewCreate","errorReviewCreate","success","successReviewCreate","rating","setRating","comment","setComment","window","alert","type","addToCartHandler","history","push","submitHandler","e","preventDefault","name","image","numReviews","price","description","_id","seller","countInStock","target","value","Array","keys","map","x","reviews","length","review","createdAt","substring"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { createReview, detailsProduct } from '../actions/productActions';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\nimport Rating from '../components/Rating';\r\nimport { PRODUCT_REVIEW_CREATE_RESET } from '../constants/productConstants';\r\n\r\nexport default function ProductScreen(props) {\r\n    const dispatch = useDispatch();\r\n    const productId = props.match.params.id;\r\n    const [qty, setQty] = useState(1);\r\n    const productDetails = useSelector((state) => state.productDetails);\r\n    const { loading, error, product } = productDetails;\r\n    const userSignin = useSelector((state) => state.userSignin);\r\n    const { userInfo } = userSignin;\r\n\r\n    const productReviewCreate = useSelector((state) => state.productReviewCreate);\r\n    const {\r\n        loading: loadingReviewCreate,\r\n        error: errorReviewCreate,\r\n        success: successReviewCreate,\r\n    } = productReviewCreate;\r\n\r\n    const [rating, setRating] = useState(0);\r\n    const [comment, setComment] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (successReviewCreate) {\r\n            window.alert('Review Submitted Successfully');\r\n            setRating('');\r\n            setComment('');\r\n            dispatch({ type: PRODUCT_REVIEW_CREATE_RESET });\r\n        }\r\n        dispatch(detailsProduct(productId));\r\n    }, [dispatch, productId, successReviewCreate]);\r\n    const addToCartHandler = () => {\r\n        props.history.push(`/cart/${productId}?qty=${qty}`);\r\n    };\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n        if (comment && rating) {\r\n            dispatch(\r\n                createReview(productId, { rating, comment, name: userInfo.name })\r\n            );\r\n        } else {\r\n            alert('Please enter comment and rating');\r\n        }\r\n    };\r\n    return ( <\r\n        div > {\r\n            loading ? ( <\r\n                LoadingBox > < /LoadingBox>\r\n            ) : error ? ( <\r\n                    MessageBox variant = \"danger\" > { error } < /MessageBox>\r\n                ) : ( <\r\n                    div >\r\n                    <\r\n                    Link to = \"/\" > Back to Home < /Link> <\r\n                    div className = \"row top\" >\r\n                    <\r\n                    div className = \"col-2\" >\r\n                    <\r\n                    img className = \"large\"\r\n                    src = { product.image }\r\n                    alt = { product.name } >\r\n                    < /img> <\r\n                    /div> <\r\n                    div className = \"col-1\" >\r\n                    <\r\n                    ul >\r\n                    <\r\n                    li >\r\n                    <\r\n                    h1 > { product.name } < /h1> <\r\n                    /li> <\r\n                    li >\r\n                    <\r\n                    Rating rating = { product.rating }\r\n                    numReviews = { product.numReviews } >\r\n                    < /Rating> <\r\n                    /li> <\r\n                    li > Pirce: ₹{ product.price } < /li> <\r\n                    li >\r\n                    Description:\r\n                    <\r\n                    p > { product.description } < /p> <\r\n                    /li> <\r\n                    /ul> <\r\n                    /div> <\r\n                    div className = \"col-1\" >\r\n                    <\r\n                    div className = \"card card-body\" >\r\n                    <\r\n                    ul >\r\n                    <\r\n                    li >\r\n                    Seller { ' ' } <\r\n                    h2 >\r\n                    <\r\n                    Link to = { `/seller/${product.product._id}` } > { product.product.name } <\r\n                    /Link> <\r\n                    /h2> <\r\n                    Rating rating = { product.seller.seller.rating }\r\n                    numReviews = { product.seller.seller.numReviews } >\r\n                    < /Rating> <\r\n                    /li> <\r\n                    li >\r\n                    <\r\n                    div className = \"row\" >\r\n                    <\r\n                    div > Price < /div> <\r\n                    div className = \"price\" > ₹{ product.price } < /div> <\r\n                    /div> <\r\n                    /li> <\r\n                    li >\r\n                    <\r\n                    div className = \"row\" >\r\n                    <\r\n                    div > Status < /div> <\r\n                    div > {\r\n                        product.countInStock > 0 ? ( <\r\n                            span className = \"success\" > In Stock < /span>\r\n                        ) : ( <\r\n                            span className = \"danger\" > Unavailable < /span>\r\n                        )\r\n                    } <\r\n                    /div> <\r\n                    /div> <\r\n                    /li> {\r\n                        product.countInStock > 0 && ( <\r\n                            >\r\n                            <\r\n                            li >\r\n                            <\r\n                            div className = \"row\" >\r\n                            <\r\n                            div > Qty < /div> <\r\n                            div >\r\n                            <\r\n                            select value = { qty }\r\n                            onChange = {\r\n                                (e) => setQty(e.target.value) } >\r\n                            {\r\n                                [...Array(product.countInStock).keys()].map(\r\n                                    (x) => ( <\r\n                                        option key = { x + 1 }\r\n                                        value = { x + 1 } > { x + 1 } <\r\n                                        /option>\r\n                                    )\r\n                                )\r\n                            } <\r\n                            /select> <\r\n                            /div> <\r\n                            /div> <\r\n                            /li> <\r\n                            li >\r\n                            <\r\n                            button onClick = { addToCartHandler }\r\n                            className = \"primary block\" >\r\n                            Add to Cart <\r\n                            /button> <\r\n                            /li> <\r\n                            />\r\n                        )\r\n                    } <\r\n                    /ul> <\r\n                    /div> <\r\n                    /div> <\r\n                    /div> <\r\n                    div >\r\n                    <\r\n                    h2 id = \"reviews\" > Reviews < /h2> {\r\n                        product.reviews.length === 0 && ( <\r\n                            MessageBox > There is no review < /MessageBox>\r\n                        )\r\n                    } <\r\n                    ul > {\r\n                        product.reviews.map((review) => ( <\r\n                            li key = { review._id } >\r\n                            <\r\n                            strong > { review.name } < /strong> <\r\n                            Rating rating = { review.rating }\r\n                            caption = \" \" > < /Rating> <\r\n                            p > { review.createdAt.substring(0, 10) } < /p> <\r\n                            p > { review.comment } < /p> <\r\n                            /li>\r\n                        ))\r\n                    } <\r\n                    li > {\r\n                        userInfo ? ( <\r\n                            form className = \"form\"\r\n                            onSubmit = { submitHandler } >\r\n                            <\r\n                            div >\r\n                            <\r\n                            h2 > Write a customer review < /h2> <\r\n                            /div> <\r\n                            div >\r\n                            <\r\n                            label htmlFor = \"rating\" > Rating < /label> <\r\n                            select id = \"rating\"\r\n                            value = { rating }\r\n                            onChange = {\r\n                                (e) => setRating(e.target.value) } >\r\n                            <\r\n                            option value = \"\" > Select... < /option> <\r\n                            option value = \"1\" > 1 - Poor < /option> <\r\n                            option value = \"2\" > 2 - Fair < /option> <\r\n                            option value = \"3\" > 3 - Good < /option> <\r\n                            option value = \"4\" > 4 - Very good < /option> <\r\n                            option value = \"5\" > 5 - Excelent < /option> <\r\n                            /select> <\r\n                            /div> <\r\n                            div >\r\n                            <\r\n                            label htmlFor = \"comment\" > Comment < /label> <\r\n                            textarea id = \"comment\"\r\n                            value = { comment }\r\n                            onChange = {\r\n                                (e) => setComment(e.target.value) } >\r\n                            < /textarea> <\r\n                            /div> <\r\n                            div >\r\n                            <\r\n                            label / >\r\n                            <\r\n                            button className = \"primary\"\r\n                            type = \"submit\" >\r\n                            Submit <\r\n                            /button> <\r\n                            /div> <\r\n                            div > {\r\n                                loadingReviewCreate && < LoadingBox > < /LoadingBox>} {\r\n                                    errorReviewCreate && ( <\r\n                                        MessageBox variant = \"danger\" > { errorReviewCreate } <\r\n                                        /MessageBox>\r\n                                    )\r\n                                } <\r\n                                /div> <\r\n                                /form>\r\n                            ): ( <\r\n                                MessageBox >\r\n                                Please < Link to = \"/signin\" > Sign In < /Link> to write a review <\r\n                                /MessageBox>\r\n                            )\r\n                        } <\r\n                        /li> <\r\n                        /ul> <\r\n                        /div> <\r\n                        /div>\r\n                    )\r\n                } <\r\n                /div>\r\n        );\r\n    }"]},"metadata":{},"sourceType":"module"}