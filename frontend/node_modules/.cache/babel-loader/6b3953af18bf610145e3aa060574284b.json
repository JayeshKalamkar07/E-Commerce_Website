{"ast":null,"code":"var _jsxFileName = \"D:\\\\vs code\\\\OUTSTANDING-3\\\\frontend\\\\src\\\\screens\\\\OrderScreen.js\";\nimport Axios from 'axios';\nimport { PayPalButton } from 'react-paypal-button-v2';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { deliverOrder, detailsOrder, payOrder } from '../actions/orderActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport { ORDER_DELIVER_RESET, ORDER_PAY_RESET } from '../constants/orderConstants';\nexport default function OrderScreen(props) {\n  const orderId = props.match.params.id;\n  const [sdkReady, setSdkReady] = useState(false);\n  const orderDetails = useSelector(state => state.orderDetails);\n  const {\n    order,\n    loading,\n    error\n  } = orderDetails;\n  const userSignin = useSelector(state => state.userSignin);\n  const {\n    userInfo\n  } = userSignin;\n  const orderPay = useSelector(state => state.orderPay);\n  const {\n    loading: loadingPay,\n    error: errorPay,\n    success: successPay\n  } = orderPay;\n  const orderDeliver = useSelector(state => state.orderDeliver);\n  const {\n    loading: loadingDeliver,\n    error: errorDeliver,\n    success: successDeliver\n  } = orderDeliver;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const addPayPalScript = async () => {\n      const {\n        data\n      } = await Axios.get('/api/config/paypal');\n      const script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.src = `https://www.paypal.com/sdk/js?client-id=${data}`;\n      script.async = true;\n\n      script.onload = () => {\n        setSdkReady(true);\n      };\n\n      document.body.appendChild(script);\n    };\n\n    if (!order || successPay || successDeliver || order && order._id !== orderId) {\n      dispatch({\n        type: ORDER_PAY_RESET\n      });\n      dispatch({\n        type: ORDER_DELIVER_RESET\n      });\n      dispatch(detailsOrder(orderId));\n    } else {\n      if (!order.isPaid) {\n        if (!window.paypal) {\n          addPayPalScript();\n        } else {\n          setSdkReady(true);\n        }\n      }\n    }\n  }, [dispatch, orderId, sdkReady, successPay, successDeliver, order]);\n\n  const successPaymentHandler = paymentResult => {\n    dispatch(payOrder(order, paymentResult));\n  };\n\n  const deliverHandler = () => {\n    dispatch(deliverOrder(order._id));\n  };\n\n  return loading ? /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 24\n    }\n  }, \" \") : error ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 23\n    }\n  }, \" \", error, \" \") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, \" Order \", order._id, \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, \" Shippring \"), \" \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 35\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, \" Name: \"), \" \", order.shippingAddress.fullName, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 72\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, \" Address: \"), \" \", order.shippingAddress.address, \", \", order.shippingAddress.city, \", \", ' ', \" \", order.shippingAddress.postalCode, \", \", order.shippingAddress.country, \" \"), \" \", order.isDelivered ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 39\n    }\n  }, \"Delivered at \", order.deliveredAt, \" \") : /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 23\n    }\n  }, \" Not Delivered \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, \" Payment \"), \" \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, \" Method: \"), \" \", order.paymentMethod, \" \"), \" \", order.isPaid ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 34\n    }\n  }, \"Paid at \", order.paidAt, \" \") : /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 23\n    }\n  }, \" Not Paid \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, \" Order Items \"), \" \", /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 37\n    }\n  }, \" \", order.orderItems.map(item => /*#__PURE__*/React.createElement(\"li\", {\n    key: item.product,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 50\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: item.image,\n    alt: item.name,\n    className: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 21\n    }\n  }), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"min-30\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/product/${item.product}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, \" \", item.name, \" \"), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 21\n    }\n  }, \" \", item.qty, \"x\\u20B9 \", item.price, \" = \\u20B9 \", item.qty * item.price, \" \"), \" \"), \" \")), \" \"), \" \"), \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, \" Order Summary \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, \" Items \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 33\n    }\n  }, \" \\u20B9\", order.itemsPrice.toFixed(2), \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, \" Shipping \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 36\n    }\n  }, \" \\u20B9\", order.shippingPrice.toFixed(2), \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }\n  }, \" Tax \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 31\n    }\n  }, \" \\u20B9\", order.taxPrice.toFixed(2), \" \"), \" \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }\n  }, \" Order Total \"), \" \"), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, \" \\u20B9\", order.totalPrice.toFixed(2), \" \"), \" \"), \" \"), \" \"), \" \", !order.isPaid && /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 36\n    }\n  }, \" \", !sdkReady ? /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 41\n    }\n  }, \" \") : /*#__PURE__*/React.createElement(React.Fragment, null, \" \", errorPay && /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 47\n    }\n  }, \" \", errorPay, \" \"), \" \", loadingPay && /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 47\n    }\n  }, \" \"), /*#__PURE__*/React.createElement(PayPalButton, {\n    amount: order.totalPrice,\n    onSuccess: successPaymentHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 33\n    }\n  }), \" \"), \" \"), \" \", userInfo.isAdmin && order.isPaid && !order.isDelivered && /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 81\n    }\n  }, \" \", loadingDeliver && /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 51\n    }\n  }, \" \"), \" \", errorDeliver && /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 55\n    }\n  }, \" \", errorDeliver, \" \"), \" \", /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"primary block\",\n    onClick: deliverHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 35\n    }\n  }, \"Deliver Order \"), \" \"), \" \"), \" \"), \" \"), \" \"), \" \");\n}","map":{"version":3,"sources":["D:/vs code/OUTSTANDING-3/frontend/src/screens/OrderScreen.js"],"names":["Axios","PayPalButton","React","useEffect","useState","useDispatch","useSelector","Link","deliverOrder","detailsOrder","payOrder","LoadingBox","MessageBox","ORDER_DELIVER_RESET","ORDER_PAY_RESET","OrderScreen","props","orderId","match","params","id","sdkReady","setSdkReady","orderDetails","state","order","loading","error","userSignin","userInfo","orderPay","loadingPay","errorPay","success","successPay","orderDeliver","loadingDeliver","errorDeliver","successDeliver","dispatch","addPayPalScript","data","get","script","document","createElement","type","src","async","onload","body","appendChild","_id","isPaid","window","paypal","successPaymentHandler","paymentResult","deliverHandler","shippingAddress","fullName","address","city","postalCode","country","isDelivered","deliveredAt","paymentMethod","paidAt","orderItems","map","item","product","image","name","qty","price","itemsPrice","toFixed","shippingPrice","taxPrice","totalPrice","isAdmin"],"mappings":"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","sourcesContent":["import Axios from 'axios';\r\nimport { PayPalButton } from 'react-paypal-button-v2';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { deliverOrder, detailsOrder, payOrder } from '../actions/orderActions';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\nimport {\r\n    ORDER_DELIVER_RESET,\r\n    ORDER_PAY_RESET,\r\n} from '../constants/orderConstants';\r\n\r\nexport default function OrderScreen(props) {\r\n    const orderId = props.match.params.id;\r\n    const [sdkReady, setSdkReady] = useState(false);\r\n    const orderDetails = useSelector((state) => state.orderDetails);\r\n    const { order, loading, error } = orderDetails;\r\n    const userSignin = useSelector((state) => state.userSignin);\r\n    const { userInfo } = userSignin;\r\n\r\n    const orderPay = useSelector((state) => state.orderPay);\r\n    const {\r\n        loading: loadingPay,\r\n        error: errorPay,\r\n        success: successPay,\r\n    } = orderPay;\r\n    const orderDeliver = useSelector((state) => state.orderDeliver);\r\n    const {\r\n        loading: loadingDeliver,\r\n        error: errorDeliver,\r\n        success: successDeliver,\r\n    } = orderDeliver;\r\n    const dispatch = useDispatch();\r\n    useEffect(() => {\r\n        const addPayPalScript = async() => {\r\n            const { data } = await Axios.get('/api/config/paypal');\r\n            const script = document.createElement('script');\r\n            script.type = 'text/javascript';\r\n            script.src = `https://www.paypal.com/sdk/js?client-id=${data}`;\r\n            script.async = true;\r\n            script.onload = () => {\r\n                setSdkReady(true);\r\n            };\r\n            document.body.appendChild(script);\r\n        };\r\n        if (!order ||\r\n            successPay ||\r\n            successDeliver ||\r\n            (order && order._id !== orderId)\r\n        ) {\r\n            dispatch({ type: ORDER_PAY_RESET });\r\n            dispatch({ type: ORDER_DELIVER_RESET });\r\n            dispatch(detailsOrder(orderId));\r\n        } else {\r\n            if (!order.isPaid) {\r\n                if (!window.paypal) {\r\n                    addPayPalScript();\r\n                } else {\r\n                    setSdkReady(true);\r\n                }\r\n            }\r\n        }\r\n    }, [dispatch, orderId, sdkReady, successPay, successDeliver, order]);\r\n\r\n    const successPaymentHandler = (paymentResult) => {\r\n        dispatch(payOrder(order, paymentResult));\r\n    };\r\n    const deliverHandler = () => {\r\n        dispatch(deliverOrder(order._id));\r\n    };\r\n\r\n    return loading ? ( <\r\n            LoadingBox > < /LoadingBox>\r\n        ) : error ? ( <\r\n            MessageBox variant = \"danger\" > { error } < /MessageBox>\r\n        ) : ( <\r\n            div >\r\n            <\r\n            h1 > Order { order._id } < /h1> <\r\n            div className = \"row top\" >\r\n            <\r\n            div className = \"col-2\" >\r\n            <\r\n            ul >\r\n            <\r\n            li >\r\n            <\r\n            div className = \"card card-body\" >\r\n            <\r\n            h2 > Shippring < /h2> <\r\n            p >\r\n            <\r\n            strong > Name: < /strong> {order.shippingAddress.fullName} <br / >\r\n            <\r\n            strong > Address: < /strong> {order.shippingAddress.address}, { order.shippingAddress.city }, { ' ' } { order.shippingAddress.postalCode }, { order.shippingAddress.country } <\r\n            /p> {\r\n                order.isDelivered ? ( <\r\n                    MessageBox variant = \"success\" >\r\n                    Delivered at { order.deliveredAt } <\r\n                    /MessageBox>\r\n                ) : ( <\r\n                    MessageBox variant = \"danger\" > Not Delivered < /MessageBox>\r\n                )\r\n            } <\r\n            /div> <\r\n            /li> <\r\n            li >\r\n            <\r\n            div className = \"card card-body\" >\r\n            <\r\n            h2 > Payment < /h2> <\r\n            p >\r\n            <\r\n            strong > Method: < /strong> {order.paymentMethod} <\r\n            /p> {\r\n                order.isPaid ? ( <\r\n                    MessageBox variant = \"success\" >\r\n                    Paid at { order.paidAt } <\r\n                    /MessageBox>\r\n                ) : ( <\r\n                    MessageBox variant = \"danger\" > Not Paid < /MessageBox>\r\n                )\r\n            } <\r\n            /div> <\r\n            /li> <\r\n            li >\r\n            <\r\n            div className = \"card card-body\" >\r\n            <\r\n            h2 > Order Items < /h2> <\r\n            ul > {\r\n                order.orderItems.map((item) => ( <\r\n                    li key = { item.product } >\r\n                    <\r\n                    div className = \"row\" >\r\n                    <\r\n                    div >\r\n                    <\r\n                    img src = { item.image }\r\n                    alt = { item.name }\r\n                    className = \"small\" >\r\n                    < /img> <\r\n                    /div> <\r\n                    div className = \"min-30\" >\r\n                    <\r\n                    Link to = { `/product/${item.product}` } > { item.name } <\r\n                    /Link> <\r\n                    /div>\r\n\r\n                    <\r\n                    div > { item.qty }\r\n                    x₹ { item.price } = ₹ { item.qty * item.price } <\r\n                    /div> <\r\n                    /div> <\r\n                    /li>\r\n                ))\r\n            } <\r\n            /ul> <\r\n            /div> <\r\n            /li> <\r\n            /ul> <\r\n            /div> <\r\n            div className = \"col-1\" >\r\n            <\r\n            div className = \"card card-body\" >\r\n            <\r\n            ul >\r\n            <\r\n            li >\r\n            <\r\n            h2 > Order Summary < /h2> <\r\n            /li> <\r\n            li >\r\n            <\r\n            div className = \"row\" >\r\n            <\r\n            div > Items < /div> <\r\n            div > ₹{ order.itemsPrice.toFixed(2) } < /div> <\r\n            /div> <\r\n            /li> <\r\n            li >\r\n            <\r\n            div className = \"row\" >\r\n            <\r\n            div > Shipping < /div> <\r\n            div > ₹{ order.shippingPrice.toFixed(2) } < /div> <\r\n            /div> <\r\n            /li> <\r\n            li >\r\n            <\r\n            div className = \"row\" >\r\n            <\r\n            div > Tax < /div> <\r\n            div > ₹{ order.taxPrice.toFixed(2) } < /div> <\r\n            /div> <\r\n            /li> <\r\n            li >\r\n            <\r\n            div className = \"row\" >\r\n            <\r\n            div >\r\n            <\r\n            strong > Order Total < /strong> <\r\n            /div> <\r\n            div >\r\n            <\r\n            strong > ₹{ order.totalPrice.toFixed(2) } < /strong> <\r\n            /div> <\r\n            /div> <\r\n            /li> {\r\n                !order.isPaid && ( <\r\n                    li > {!sdkReady ? ( <\r\n                        LoadingBox > < /LoadingBox>\r\n                    ) : ( <\r\n                            > {\r\n                                errorPay && ( <\r\n                                    MessageBox variant = \"danger\" > { errorPay } < /MessageBox>\r\n                                )\r\n                            } {\r\n                                loadingPay && < LoadingBox > < /LoadingBox>}\r\n\r\n                                <\r\n                                PayPalButton\r\n                                amount = { order.totalPrice }\r\n                                onSuccess = { successPaymentHandler } >\r\n                                    < /PayPalButton> <\r\n                                    />\r\n                            )\r\n                        } <\r\n                        /li>)\r\n                } {\r\n                    userInfo.isAdmin && order.isPaid && !order.isDelivered && ( <\r\n                            li > {\r\n                                loadingDeliver && < LoadingBox > < /LoadingBox>} {\r\n                                    errorDeliver && ( <\r\n                                        MessageBox variant = \"danger\" > { errorDeliver } < /MessageBox>\r\n                                    )\r\n                                } <\r\n                                button\r\n                                type = \"button\"\r\n                                className = \"primary block\"\r\n                                onClick = { deliverHandler } >\r\n                                Deliver Order <\r\n                                /button> <\r\n                                /li>\r\n                            )\r\n                        } <\r\n                        /ul> <\r\n                        /div> <\r\n                        /div> <\r\n                        /div> <\r\n                        /div>\r\n                );\r\n            }"]},"metadata":{},"sourceType":"module"}